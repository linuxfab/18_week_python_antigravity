# Week 17 | 隨堂測驗 (Quiz)：除錯與效能優化

> **測驗目標**：檢測學生對 Traceback 解讀、除錯技巧以及效能優化原則的理解。
> **測驗時間**：10 分鐘

---

## 🟢 第一部分：是非題 (True/False)

1.  (  ) Python 的 Traceback 錯誤訊息通常會告訴你出錯的檔案名稱、行號以及錯誤類型。
2.  (  ) 「小黃鴨除錯法 (Rubber Duck Debugging)」的核心原理是：把邏輯講出來有助於大腦自動發現疏漏。
3.  (  ) 在遊戲的 `while` 主迴圈中，每一幀都重新呼叫 `pygame.font.SysFont()` 初始化字體物件是一種高效的做法。
4.  (  ) `try...except` 結構可以讓程式在遇到錯誤時，不會直接崩潰，而是執行替代方案。
5.  (  ) 如果一幀的執行時間超過 16ms，代表遊戲已經達不到 60 FPS 的流暢標準了。

---

## 🟡 第二部分：情境分析 (Scenario Analysis)

請閱讀以下程式碼，並回答：它可能會產生哪種錯誤？

```python
score = 0

def eat_food():
    score += 10    # ← 這行會出什麼事？
    print(f"分數: {score}")

eat_food()
```

**問題**：
1.  這段代碼會產生什麼類型的錯誤？ → ______________________
2.  修正方法是什麼？ → 在函式內加入 `______ score`

---

## 🔴 第三部分：腦力激盪 (Logic Challenge)

1.  **效能診斷**：你的遊戲突然從 60 FPS 掉到 5 FPS，請列出至少兩個可能的原因。
    *   原因 1：____________________
    *   原因 2：____________________

2.  **防禦性設計**：如果你的遊戲需要載入 5 個音效檔案，但使用者的電腦可能缺少其中某些檔案，你會如何設計程式碼來防止遊戲崩潰？
    *   答案：____________________

---

## 💡 解答與解析

### 是非題
1. **True**
2. **True**
3. **False** (應該在迴圈外只初始化一次)
4. **True**
5. **True** (1000ms / 60fps ≈ 16.67ms)

### 情境分析
1. `UnboundLocalError` (Python 在函式中看到 `score +=` 就會認為 score 是區域變數，但它尚未被賦值)
2. `global`

### 腦力激盪
1. 開放性建議：在迴圈中載入圖片/字體、在單幀內做了大量數學運算、繪製了太多不可見的物件、記憶體洩漏導致的卡頓等。
2. 開放性建議：用 `for` 迴圈搭配 `try...except` 逐一載入；載入失敗的音效設為 `None`；播放前先用 `if sound is not None:` 判斷。
